<html>
<head>
    <title>Favourite Tweets</title>
    <script src="js/jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.3.0-rc.1.js" type="text/javascript"></script>
	<script src="js/jquery.sparkline.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/jqm-demos.css">
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0-rc.1.css">

	<style>
 	body{ height:100%; width:100% }

	/* If screen is too small, don't display description */
	@media screen and (max-width: 640px) {
		#text {display: none;}
	}

	@media screen and (max-width: 500px) {
		#profile {
			height: 65px;
		}

		#image {
			height:65px;
			width:65px;
		}

		.extra{
			height:100%;
			width:100%;
		}
	}

	@media screen and (min-width: 500px) {
		.extra{
			height:640px;
			width:500px;
		}
	}


	</style>

</head>
<body>

<div data-role="page" id="back">

    <div id="title" data-role="header" data-theme="b">
        <h1 style="text-align:left">Your Tweets</h1>
		<a class="ui-btn-right" href="#popupBasic" data-role="button" data-inline="true" data-rel="popup" data-transition="slidedown">Help</a>

		<div id="popupBasic" data-role="popup">    
			<p>Click on the profiles to expand for more data</p>
		</div>
    </div><!-- /header -->
    
    <div data-role="content">
   
		<ul id="list" class="ui-icon-alt" data-role="listview" data-inset="true" data-filter-placeholder="Search tweets..." data-filter="true"></ul>

    </div><!-- /content -->
 
	<!-- Library of additonal data -->
	<div id="dataLibrary"><div>  

    <div class="jqm-footer">
        <p class="jqm-version"></p>
        <p>&copy; 2010, 2013 jQuery Foundation and other contributors:</p>
    </div><!-- /jqm-footer -->
    
</div><!-- /page -->    

</body>


<script type="text/javascript">
    $.getJSON('model.json', function (data) {
		
        for (var i = 0; i < data.length; i++) {

			// Personal Data
			var profileIm = data[i].user.profile_image_url	;	
			var url = data[i].user.url;
			var name = data[i].user.name;
			var scrname = data[i].user.screen_name;
			var location = data[i].user.screen_name;
			var desc = data[i].user.description;
			
			// Tweet related data
			var text = data[i].text;
			var id = data[i].id;
         	
			// Load in main page data
			var shtml='';  
			shtml=shtml+'<li id="profile">';
			shtml=shtml+ '<a href="#' + id +'" data-rel="popup" data-transition="pop">';
            shtml=shtml+'<img id="image" width="100px" src="'+profileIm+'">';
            shtml=shtml+'<h3>'+scrname+'</h3>';
            shtml=shtml+'<p id="text">'+text+'</p>';
			shtml=shtml+'<p>Source:'+url+'</p>';
   
            shtml=shtml+'</a></li>';
	
			$('#list').append(shtml);
		
			// Load in pop-up additional info
			shtml=''; 
			shtml=shtml+'<div class="extra" id="' + id + '" data-role="popup" data-theme="d">';

			// Profile information
			shtml=shtml+'<div data-role="header" data-theme="b" style="height:48px">';
			shtml=shtml+'<img border="0" id="popupID" src="'+profileIm+'" style="float:left;display:inline">';
			shtml=shtml+'<h1>'+scrname+'</h1>';
			shtml=shtml+'</div>';

			shtml=shtml+'<p> Real Name: '+name.bold()+'</p>';
			shtml=shtml+'<p>Location: '+location+'</p>';
			shtml=shtml+'<p>Source: '+url+'</p>';
			shtml=shtml+'<p style="font-size:80%">'+desc+'</p>';

			// Insert additional twitter info
			shtml=shtml+'<div data-role="navbar"> <ul><li><a class="ui-btn-active">Tweet</a></li></ul></div>';

			// Back button 
			shtml=shtml+'<a href="#back" data-role="button" data-theme="b" data-corners="false">Back</a>';
			shtml=shtml+'</div>';
			$('#dataLibrary').append(shtml);

        }

    });

</script>

</html>
